(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{244:function(e,t,r){"use strict";var a=r(38),n=r.n(a),o=r(246),i=r(471),c=r(1),l=r.n(c),s=r(64),u=r(102),d=r(22),m=r(245),f=r(13),p=r(9),g=r(219),h=r(10),b=r.n(h),y=function(){var e=Object(c.useState)("dark"===u.Appearance.getColorScheme()),t=n()(e,2),r=t[0],a=t[1];return Object(c.useEffect)((function(){var e=u.Appearance.addChangeListener((function(e){var t=e.colorScheme;a("dark"===t)}));return function(){return e.remove()}}),[]),r},v=function(e){var t=Object(d.useTheme)(),r=Object(c.useState)(e(t)),a=n()(r,2),o=a[0],i=a[1];return Object(c.useEffect)((function(){i(e(t))}),[e,t]),o},k=f.a.create({body1:{fontFamily:"Poppins",fontSize:16,fontWeight:"400",letterSpacing:.5},body2:{fontFamily:"Poppins",fontSize:14,fontWeight:"400",letterSpacing:.25},button:{fontFamily:"Poppins",fontSize:14,fontWeight:"500",letterSpacing:1.25},caption:{fontFamily:"Poppins",fontSize:12,fontWeight:"400",letterSpacing:.4},headline1:{fontFamily:"Poppins",fontSize:96,fontWeight:"300",letterSpacing:-1.5},headline2:{fontFamily:"Poppins",fontSize:60,fontWeight:"300",letterSpacing:-.5},headline3:{fontFamily:"Poppins",fontSize:48,fontWeight:"400",letterSpacing:0},headline4:{fontFamily:"Poppins",fontSize:34,fontWeight:"400",letterSpacing:.25},headline5:{fontFamily:"Poppins",fontSize:24,fontWeight:"400",letterSpacing:0},headline6:{fontFamily:"Poppins",fontSize:20,fontWeight:"500",letterSpacing:.15},overline:{fontFamily:"Poppins",fontSize:10,fontWeight:"400",letterSpacing:1.5},subtitle1:{fontFamily:"Poppins",fontSize:16,fontWeight:"400",letterSpacing:.15},subtitle2:{fontFamily:"Poppins",fontSize:14,fontWeight:"500",letterSpacing:.1}});function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S,w=function(){var e=v(j);return l.a.createElement(p.a,{style:e.avatarWatermark},l.a.createElement(d.Text,{style:k.body2},"\ud83d\udc64"))},D=function(e){var t=e.showAvatar,r=e.username,a=e.resultValue,n=v(j),o=a&&"hidden"!==a?a:"?";return l.a.createElement(d.Surface,{style:[t&&n.avatarDecoration,n.resultCard]},t&&l.a.createElement(w,null),l.a.createElement(p.a,{style:n.resultCardTitleContainer},l.a.createElement(d.Text,{style:k.headline3},o)),l.a.createElement(p.a,{style:n.resultCardSubtitleContainer},l.a.createElement(d.Text,{style:n.subtitle,numberOfLines:1},r)))},j=function(e){return f.a.create({avatarDecoration:{borderWidth:2,borderColor:e.dark?e.colors.accent:e.colors.primary},avatarWatermark:{position:"absolute",top:4,right:4},resultCard:{borderRadius:2*e.roundness,elevation:8,height:150,margin:8,overflow:"hidden",width:100},resultCardSubtitleContainer:{alignItems:"center",backgroundColor:e.dark?e.colors.accent:e.colors.primary,flexShrink:1,paddingHorizontal:4},resultCardTitleContainer:{alignItems:"center",flex:1,justifyContent:"center"},subtitle:E(E({},k.body1),{},{color:e.dark?"black":"white"})})},P=function(e){var t=e.children,r=e.mode;return l.a.createElement(p.a,{style:[C.flexWrapRow,{justifyContent:r}]},t)},C=f.a.create({flexWrapRow:{alignItems:"center",alignSelf:"stretch",flexDirection:"row",flexWrap:"wrap",marginVertical:16}}),T=function(e){var t=e.users,r=e.userId;return l.a.createElement(P,{mode:"center"},t.sort((function(e,t){return x(e.voteValue)-x(t.voteValue)})).map((function(e){var t=e.id===r;return l.a.createElement(D,{key:e.id,resultValue:e.voteValue,showAvatar:t,username:e.userName})})))},x=function(e){switch(typeof e){case"number":return e;default:return Number.MAX_SAFE_INTEGER}},L=r(164),F=r.n(L),R=r(27);!function(e){e[e.JoinRequest=0]="JoinRequest",e[e.JoinResponse=1]="JoinResponse",e[e.LeaveRequest=2]="LeaveRequest",e[e.Reset=3]="Reset",e[e.RoomUpdate=4]="RoomUpdate",e[e.SetName=5]="SetName",e[e.SetVoteValue=6]="SetVoteValue"}(S||(S={}));var W,I=function(e){var t=Object(c.useRef)(new WebSocket("wss://planningpokerserver.herokuapp.com/")).current,r=function(e){var t=window.location.search;return new URLSearchParams(t).get(e)||void 0}("roomId"),a=Object(c.useState)(),o=n()(a,2),i=o[0],l=o[1],s=Object(c.useState)(),u=n()(s,2),d=u[0],m=u[1];"web"!==R.a.OS||r||(window.location.search="roomId="+new F.a(4).toString());var f=Object(c.useState)({id:r||new F.a(4).toString(),name:"",users:{},admin:void 0}),p=n()(f,2),g=p[0],h=p[1];e=e||"Guest";var b=Object(c.useCallback)((function(e){return t.send(JSON.stringify(e))}),[t]);Object(c.useEffect)((function(){t.onopen=function(){var t={type:S.JoinRequest,roomId:g.id,payload:{name:e}};b(t)},t.onmessage=function(e){if("Heartbeat"!==e.data){var t=JSON.parse(e.data);switch(t.type){case S.JoinResponse:m(t.payload.userId);break;case S.RoomUpdate:0,h(t.payload.room),d&&"hidden"!==t.payload.room.users[d].voteValue&&l(t.payload.room.users[d].voteValue)}}else console.log("Received heartbeat from server")},t.onerror=function(e){0}}),[g.id,b,d,e,t]),Object(c.useEffect)((function(){if(t.readyState===WebSocket.OPEN){var r={type:S.SetName,roomId:g.id,payload:{name:e}};b(r)}}),[g.id,b,e,t.readyState]);return{reset:function(){l(void 0);var e={type:S.Reset,roomId:g.id};b(e)},room:g,userId:d,vote:function(e){l(e);var t={type:S.SetVoteValue,roomId:g.id,payload:{voteValue:e}};b(t)},voteValue:i}};!function(e){e.DarkZero="#97b498",e.DarkOne="#94cc7d",e.DarkTwo="#69cb30",e.DarkThree="#c8cc00",e.DarkFive="#b27500",e.DarkEight="#a10000",e.DarkThirteen="#a252b7",e.DarkTwentyOne="#8a8a8a",e.DarkUnknown="#000000",e.DarkDisabled="#333",e.LightZero="#c8e6c9",e.LightOne="#C6FFAD",e.LightTwo="#9EFF64",e.LightThree="#FFFF3C",e.LightFive="#E9A426",e.LightEight="#DB0000",e.LightThirteen="#D581EA",e.LightTwentyOne="#BABABA",e.LightUnknown="#FFFFFF",e.LightDisabled="#ccc"}(W||(W={}));var V=[0,1,2,3,5,8,13,21,"\ud83e\udd14"],z=function(e){var t=e.value,r=e.onPress,a=e.isDark,n=e.greyedOut,o=v(U),i=Object(c.useCallback)((function(){return r(t)}),[r,t]);return l.a.createElement(d.Card,{style:[o.valueContainer,{backgroundColor:A(n?-1:t,a)}],onPress:i},l.a.createElement(p.a,{style:o.valueCard},l.a.createElement(d.Text,{style:[k.subtitle1,{fontWeight:"900"}]},t)))},A=function(e,t){switch(e){case-1:return t?W.DarkDisabled:W.LightDisabled;case 0:return t?W.DarkZero:W.LightZero;case 1:return t?W.DarkOne:W.LightOne;case 2:return t?W.DarkTwo:W.LightTwo;case 3:return t?W.DarkThree:W.LightThree;case 5:return t?W.DarkFive:W.LightFive;case 8:return t?W.DarkEight:W.LightEight;case 13:return t?W.DarkThirteen:W.LightThirteen;case 21:return t?W.DarkTwentyOne:W.LightTwentyOne;default:return t?W.DarkUnknown:W.LightUnknown}},J=function(e){var t=e.onValuePress,r=e.selectedValue,a=e.isDark;return l.a.createElement(P,{mode:"center"},V.map((function(e){return l.a.createElement(z,{key:e,value:e,onPress:t,isDark:a,greyedOut:void 0!==r&&r!==e})})))},U=function(e){return f.a.create({container:{flexDirection:"row",justifyContent:"center"},valueCard:{alignItems:"center",borderRadius:8,height:50,justifyContent:"center",width:50},valueContainer:{marginHorizontal:8,elevation:4,marginVertical:4}})},N=function(e){var t=e.onPress;return l.a.createElement(d.Button,{icon:"replay",mode:"contained",onPress:t},"Reset")},B={small:4,standard:8,medium:16,large:32,extraLarge:64},H=f.a.create({spacingSmall:{width:B.small,height:B.small},spacingStandard:{width:B.standard,height:B.standard},spacingMedium:{width:B.medium,height:B.medium},spacingLarge:{width:B.large,height:B.large},spacingExtraLarge:{width:B.extraLarge,height:B.extraLarge}}),q=function(e){var t=e.small,r=e.medium,a=e.large,n=e.extraLarge,o=H.spacingStandard;return t?o=H.spacingSmall:r?o=H.spacingMedium:a?o=H.spacingLarge:n&&(o=H.spacingExtraLarge),l.a.createElement(p.a,{style:o})},Z=function(e){var t=e.roomId,r=v(M);return l.a.createElement(d.Card,{elevation:0,style:r.clipTextOverflow},l.a.createElement(p.a,{style:[r.container,r.clipTextOverflow]},l.a.createElement(q,{medium:!0}),l.a.createElement(d.Text,{style:k.headline5},"Room"),l.a.createElement(d.Text,{style:k.subtitle2,numberOfLines:2},"ID: "+t),l.a.createElement(q,{medium:!0})))},M=function(e){return f.a.create({container:{paddingHorizontal:8,backgroundColor:e.colors.background,borderRadius:e.roundness},clipTextOverflow:{flexShrink:1}})},G=function(e){var t=e.username,r=e.onUsernameChange,a=v(_),n=Object(d.useTheme)();return l.a.createElement(d.Card,{elevation:0},l.a.createElement(p.a,{style:a.container},l.a.createElement(q,{medium:!0}),l.a.createElement(d.Text,{style:k.headline5},"User"),l.a.createElement(d.TextInput,{style:{backgroundColor:n.colors.background},value:t,label:"Username",onChangeText:r}),l.a.createElement(q,{medium:!0})))},_=function(e){return f.a.create({container:{paddingHorizontal:8,backgroundColor:e.colors.background,borderRadius:2*e.roundness}})},X=function(e){var t=e.isDark,r=e.toggleTheme,a=Object(c.useState)(""),o=n()(a,2),i=o[0],u=o[1],f=v(K),g=I(i),h=g.voteValue,b=g.vote,y=g.room,O=g.userId,E=g.reset,S=Object(c.useCallback)((function(e){u(e),s.a.setItem("username",e)}),[u]);return Object(c.useEffect)((function(){s.a.getItem("username").then((function(e){e&&u(e)}))}),[]),l.a.createElement(d.Surface,{style:f.page},l.a.createElement(d.Surface,{style:f.canvas},l.a.createElement(p.a,{style:f.head},l.a.createElement(d.Text,{style:k.headline3},"Planning Poker \ud83c\udfb2"),l.a.createElement(p.a,{style:f.switchWrapper},l.a.createElement(m.a,{value:t,onChange:r}))),l.a.createElement(p.a,{style:f.divider}),l.a.createElement(P,{mode:"space-evenly"},l.a.createElement(p.a,{style:f.flexRow},l.a.createElement(Z,{roomId:y.id})),l.a.createElement(q,{medium:!0}),l.a.createElement(p.a,{style:f.flexRow},l.a.createElement(G,{username:i,onUsernameChange:S}))),l.a.createElement(N,{onPress:E}),l.a.createElement(p.a,null,l.a.createElement(q,null),l.a.createElement(J,{onValuePress:b,isDark:t,selectedValue:h}),l.a.createElement(q,null)),l.a.createElement(T,{users:Object.values(y.users),userId:O})))},K=function(e){return f.a.create({canvas:{alignItems:"center",height:"100%",paddingHorizontal:16,paddingVertical:16,width:Object(g.a)("90%")},divider:{alignSelf:"stretch",borderBottomColor:e.dark?e.colors.accent:e.colors.primary,borderBottomWidth:2},fillWidth:{alignSelf:"stretch"},flexRow:{flex:1,height:"100%"},head:{flexDirection:"row",justifyContent:"space-between",width:"100%"},page:{alignItems:"center",backgroundColor:e.colors.primary,flex:1,paddingBottom:32},switchWrapper:{flexDirection:"column",justifyContent:"center",marginHorizontal:16}})};function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $={light:Y(Y({},d.DefaultTheme),{},{colors:Y(Y({},d.DefaultTheme.colors),{},{primary:"#00838f",accent:"#FfCDD2"})}),dark:Y(Y({},d.DarkTheme),{},{colors:Y(Y({},d.DarkTheme.colors),{},{primary:"#005662",accent:"#cb9ca1"})})};t.a=function(){var e=y(),t=Object(c.useState)(e),a=n()(t,2),m=a[0],f=a[1],p=Object(o.a)({Poppins:r(458)}),g=n()(p,1)[0],h=Object(c.useCallback)((function(){f(!m),s.a.setItem("isDark",JSON.stringify(!m))}),[m,f]);return Object(c.useEffect)((function(){s.a.getItem("isDark").then((function(e){e&&f(JSON.parse(e))}))}),[]),g?l.a.createElement(u.AppearanceProvider,null,l.a.createElement(d.Provider,{theme:m?$.dark:$.light},l.a.createElement(X,{isDark:m,toggleTheme:h}))):l.a.createElement(i.a,null)}},253:function(e,t,r){r(254),e.exports=r(460)},254:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/PlanningPokerApp/expo-service-worker.js",{scope:"/PlanningPokerApp/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))},458:function(e,t,r){e.exports=r.p+"./fonts/Poppins-Regular.ttf"}},[[253,1,2]]]);
//# sourceMappingURL=app.7845051f.chunk.js.map