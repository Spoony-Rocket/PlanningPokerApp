(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{221:function(e,t,n){"use strict";var a,r=n(1),o=n.n(r),i=n(83),u=n.n(i),c=n(108),s=n(35),l=n(11),d=n(87),m=n(66),f=n(14),v=function(e){var t=e.users,n=Object(r.useCallback)((function(e){var t=e.voteValue&&"hidden"!==e.voteValue?e.voteValue:"?";return o.a.createElement(m.Card,{key:""+e.id,style:p.userCard},o.a.createElement(s.a,null,"User: "+e.userName),o.a.createElement(s.a,null,"Vote value: "+t))}),[]);return o.a.createElement(l.a,{style:p.container},t.map(n))},p=f.a.create({container:{alignItems:"center",flexWrap:"wrap",flexDirection:"row",justifyContent:"space-around",width:"50%"},userCard:{aspectRatio:2,backgroundColor:"tomato",elevation:4,height:200,margin:8,width:100}}),h=n(220),g=n.n(h);!function(e){e[e.JoinRequest=0]="JoinRequest",e[e.JoinResponse=1]="JoinResponse",e[e.LeaveRequest=2]="LeaveRequest",e[e.SetVoteValue=3]="SetVoteValue",e[e.SetName=4]="SetName",e[e.RoomUpdate=5]="RoomUpdate"}(a||(a={}));var w,E=function(e){var t=Object(r.useRef)(new WebSocket("wss://planningpokerserver.herokuapp.com/")).current,n=Object(r.useState)({id:function(e){var t=window.location.search;return new URLSearchParams(t).get(e)||void 0}("roomId")||new g.a(4).toString(),name:"",users:{},admin:void 0}),o=u()(n,2),i=o[0],c=o[1];e=e||"Guest";var s=Object(r.useCallback)((function(e){return t.send(JSON.stringify(e))}),[t]);Object(r.useEffect)((function(){t.onopen=function(){var t={type:a.JoinRequest,roomId:i.id,payload:{name:e}};s(t)},t.onmessage=function(e){var t=JSON.parse(e.data);switch(t.type){case a.RoomUpdate:0,c(t.payload.room)}},t.onerror=function(e){0}}),[i.id,s,e,t]),Object(r.useEffect)((function(){if(t.readyState===WebSocket.OPEN){var n={type:a.SetName,roomId:i.id,payload:{name:e}};s(n)}}),[i.id,s,e,t.readyState]);return{vote:function(e){var t={type:a.SetVoteValue,roomId:i.id,payload:{voteValue:e}};s(t)},room:i}};!function(e){e.One="#C6FFAD",e.Two="#9EFF64",e.Three="#FFFF3C",e.Five="#E9A426",e.Eight="#DB0000",e.Thirteen="#D581EA",e.TwentyOne="#BABABA",e.Unknown="#FFFFFF"}(w||(w={}));var y=[0,1,2,3,5,8,13,21,"\ud83e\udd14"],b=function(e){var t=e.value,n=e.onPress,a=Object(r.useCallback)((function(){return n(t)}),[n,t]);return o.a.createElement(m.Card,{style:[O.valueContainer,{backgroundColor:k(t)}],onPress:a},o.a.createElement(l.a,{style:O.valueCard},o.a.createElement(m.Text,null,t)))},k=function(e){switch(e){case 1:return w.One;case 2:return w.Two;case 3:return w.Three;case 5:return w.Five;case 8:return w.Eight;case 13:return w.Thirteen;case 21:return w.TwentyOne;default:return w.Unknown}},C=function(e){var t=e.onValuePress;return o.a.createElement(l.a,{style:O.container},y.map((function(e){return o.a.createElement(b,{key:e,value:e,onPress:t})})))},O=f.a.create({container:{flexDirection:"row"},valueContainer:{marginHorizontal:8,elevation:4},valueCard:{alignItems:"center",borderRadius:8,height:50,justifyContent:"center",width:50}}),F=function(){var e,t=Object(r.useState)(""),n=u()(t,2),a=n[0],i=n[1],f=E(a),p=f.vote,h=f.room,g=Object(r.useCallback)((function(e){i(e),d.a.setItem("username",e)}),[i]);return Object(r.useEffect)((function(){d.a.getItem("username").then((function(e){e&&i(e)}))})),o.a.createElement(l.a,{style:{flex:1,justifyContent:"center",alignItems:"center",padding:16,paddingTop:(null!=(e=c.a.currentHeight)?e:0)+16}},o.a.createElement(s.a,null,"Room id: "+h.id),o.a.createElement(l.a,{style:{width:"50%"}},o.a.createElement(m.TextInput,{value:a,label:"Username",onChangeText:g})),o.a.createElement(C,{onValuePress:p}),o.a.createElement(v,{users:Object.values(h.users)}))};t.a=function(){return o.a.createElement(F,null)}},222:function(e,t,n){n(223),e.exports=n(422)},223:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/PlanningPokerApp/expo-service-worker.js",{scope:"/PlanningPokerApp/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))}},[[222,1,2]]]);
//# sourceMappingURL=app.13a923d0.chunk.js.map