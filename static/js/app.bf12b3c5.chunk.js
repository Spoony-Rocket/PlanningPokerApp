(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{244:function(e,t,n){"use strict";var r=n(38),a=n.n(r),i=n(246),o=n(471),c=n(1),l=n.n(c),s=n(64),u=n(106),d=n(23),f=n(245),m=n(13),g=n(9),p=n(219),h=n(10),b=n.n(h),y=function(e){var t=e.children,n=e.mode;return l.a.createElement(g.a,{style:[v.flexWrapRow,{justifyContent:n}]},t)},v=m.a.create({flexWrapRow:{alignItems:"center",alignSelf:"stretch",flexDirection:"row",flexWrap:"wrap",marginVertical:16}}),O=function(){var e=Object(c.useState)("dark"===u.Appearance.getColorScheme()),t=a()(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){var e=u.Appearance.addChangeListener((function(e){var t=e.colorScheme;r("dark"===t)}));return function(){return e.remove()}}),[]),n},k=function(e){var t=Object(d.useTheme)(),n=Object(c.useState)(e(t)),r=a()(n,2),i=r[0],o=r[1];return Object(c.useEffect)((function(){o(e(t))}),[e,t]),i},E=m.a.create({body1:{fontFamily:"Poppins",fontSize:16,fontWeight:"400",letterSpacing:.5},body2:{fontFamily:"Poppins",fontSize:14,fontWeight:"400",letterSpacing:.25},button:{fontFamily:"Poppins",fontSize:14,fontWeight:"500",letterSpacing:1.25},caption:{fontFamily:"Poppins",fontSize:12,fontWeight:"400",letterSpacing:.4},headline1:{fontFamily:"Poppins",fontSize:96,fontWeight:"300",letterSpacing:-1.5},headline2:{fontFamily:"Poppins",fontSize:60,fontWeight:"300",letterSpacing:-.5},headline3:{fontFamily:"Poppins",fontSize:48,fontWeight:"400",letterSpacing:0},headline4:{fontFamily:"Poppins",fontSize:34,fontWeight:"400",letterSpacing:.25},headline5:{fontFamily:"Poppins",fontSize:24,fontWeight:"400",letterSpacing:0},headline6:{fontFamily:"Poppins",fontSize:20,fontWeight:"500",letterSpacing:.15},overline:{fontFamily:"Poppins",fontSize:10,fontWeight:"400",letterSpacing:1.5},subtitle1:{fontFamily:"Poppins",fontSize:16,fontWeight:"400",letterSpacing:.15},subtitle2:{fontFamily:"Poppins",fontSize:14,fontWeight:"500",letterSpacing:.1}});function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D,j=function(e){var t=e.users,n=k(C),r=Object(c.useCallback)((function(e){var t=e.voteValue&&"hidden"!==e.voteValue?e.voteValue:"?";return l.a.createElement(d.Surface,{key:""+e.id,style:n.userCard},l.a.createElement(g.a,{style:n.userCardTitleContainer},l.a.createElement(d.Text,{style:E.headline3},t)),l.a.createElement(g.a,{style:n.userCardSubtitleContainer},l.a.createElement(d.Text,{style:n.subtitle,numberOfLines:1},e.userName)))}),[n.subtitle,n.userCard,n.userCardSubtitleContainer,n.userCardTitleContainer]);return l.a.createElement(y,{mode:"center"},t.map(r))},C=function(e){return m.a.create({subtitle:w(w({},E.body1),{},{color:e.dark?"black":"white"}),userCard:{borderRadius:2*e.roundness,elevation:8,height:150,margin:8,overflow:"hidden",width:100},userCardTitleContainer:{alignItems:"center",flex:1,justifyContent:"center"},userCardSubtitleContainer:{alignItems:"center",backgroundColor:e.dark?e.colors.accent:e.colors.primary,flexShrink:1,paddingHorizontal:4}})},P=n(164),T=n.n(P),x=n(27);!function(e){e[e.JoinRequest=0]="JoinRequest",e[e.JoinResponse=1]="JoinResponse",e[e.LeaveRequest=2]="LeaveRequest",e[e.SetVoteValue=3]="SetVoteValue",e[e.SetName=4]="SetName",e[e.RoomUpdate=5]="RoomUpdate"}(D||(D={}));var L,F=function(e){var t=Object(c.useRef)(new WebSocket("wss://planningpokerserver.herokuapp.com/")).current,n=function(e){var t=window.location.search;return new URLSearchParams(t).get(e)||void 0}("roomId"),r=Object(c.useState)(),i=a()(r,2),o=i[0],l=i[1];"web"!==x.a.OS||n||(window.location.search="roomId="+new T.a(4).toString());var s=Object(c.useState)({id:n||new T.a(4).toString(),name:"",users:{},admin:void 0}),u=a()(s,2),d=u[0],f=u[1];e=e||"Guest";var m=Object(c.useCallback)((function(e){return t.send(JSON.stringify(e))}),[t]);Object(c.useEffect)((function(){t.onopen=function(){var t={type:D.JoinRequest,roomId:d.id,payload:{name:e}};m(t)},t.onmessage=function(e){if("Heartbeat"!==e.data){var t=JSON.parse(e.data);switch(t.type){case D.RoomUpdate:0,f(t.payload.room)}}else console.log("Received heartbeat from server")},t.onerror=function(e){0}}),[d.id,m,e,t]),Object(c.useEffect)((function(){if(t.readyState===WebSocket.OPEN){var n={type:D.SetName,roomId:d.id,payload:{name:e}};m(n)}}),[d.id,m,e,t.readyState]);return{voteValue:o,vote:function(e){l(e);var t={type:D.SetVoteValue,roomId:d.id,payload:{voteValue:e}};m(t)},room:d}};!function(e){e.DarkZero="#97b498",e.DarkOne="#94cc7d",e.DarkTwo="#69cb30",e.DarkThree="#c8cc00",e.DarkFive="#b27500",e.DarkEight="#a10000",e.DarkThirteen="#a252b7",e.DarkTwentyOne="#8a8a8a",e.DarkUnknown="#000000",e.DarkDisabled="#333",e.LightZero="#c8e6c9",e.LightOne="#C6FFAD",e.LightTwo="#9EFF64",e.LightThree="#FFFF3C",e.LightFive="#E9A426",e.LightEight="#DB0000",e.LightThirteen="#D581EA",e.LightTwentyOne="#BABABA",e.LightUnknown="#FFFFFF",e.LightDisabled="#ccc"}(L||(L={}));var W=[0,1,2,3,5,8,13,21,"\ud83e\udd14"],R=function(e){var t=e.value,n=e.onPress,r=e.isDark,a=e.greyedOut,i=k(V),o=Object(c.useCallback)((function(){return n(t)}),[n,t]);return l.a.createElement(d.Card,{style:[i.valueContainer,{backgroundColor:z(a?-1:t,r)}],onPress:o},l.a.createElement(g.a,{style:i.valueCard},l.a.createElement(d.Text,{style:[E.subtitle1,{fontWeight:"900"}]},t)))},z=function(e,t){switch(e){case-1:return t?L.DarkDisabled:L.LightDisabled;case 0:return t?L.DarkZero:L.LightZero;case 1:return t?L.DarkOne:L.LightOne;case 2:return t?L.DarkTwo:L.LightTwo;case 3:return t?L.DarkThree:L.LightThree;case 5:return t?L.DarkFive:L.LightFive;case 8:return t?L.DarkEight:L.LightEight;case 13:return t?L.DarkThirteen:L.LightThirteen;case 21:return t?L.DarkTwentyOne:L.LightTwentyOne;default:return t?L.DarkUnknown:L.LightUnknown}},I=function(e){var t=e.onValuePress,n=e.selectedValue,r=e.isDark;return l.a.createElement(y,{mode:"center"},W.map((function(e){return l.a.createElement(R,{key:e,value:e,onPress:t,isDark:r,greyedOut:void 0!==n&&n!==e})})))},V=function(e){return m.a.create({container:{flexDirection:"row",justifyContent:"center"},valueCard:{alignItems:"center",borderRadius:8,height:50,justifyContent:"center",width:50},valueContainer:{marginHorizontal:8,elevation:4,marginVertical:4}})},A={small:4,standard:8,medium:16,large:32,extraLarge:64},J=m.a.create({spacingSmall:{width:A.small,height:A.small},spacingStandard:{width:A.standard,height:A.standard},spacingMedium:{width:A.medium,height:A.medium},spacingLarge:{width:A.large,height:A.large},spacingExtraLarge:{width:A.extraLarge,height:A.extraLarge}}),U=function(e){var t=e.small,n=e.medium,r=e.large,a=e.extraLarge,i=J.spacingStandard;return t?i=J.spacingSmall:n?i=J.spacingMedium:r?i=J.spacingLarge:a&&(i=J.spacingExtraLarge),l.a.createElement(g.a,{style:i})},N=function(e){var t=e.roomId,n=k(B);return l.a.createElement(d.Card,{elevation:0,style:n.clipTextOverflow},l.a.createElement(g.a,{style:[n.container,n.clipTextOverflow]},l.a.createElement(U,{medium:!0}),l.a.createElement(d.Text,{style:E.headline5},"Room"),l.a.createElement(d.Text,{style:E.subtitle2,numberOfLines:2},"ID: "+t),l.a.createElement(U,{medium:!0})))},B=function(e){return m.a.create({container:{paddingHorizontal:8,backgroundColor:e.colors.background,borderRadius:e.roundness},clipTextOverflow:{flexShrink:1}})},H=function(e){var t=e.username,n=k(q);return l.a.createElement(d.Card,{elevation:0},l.a.createElement(g.a,{style:n.container},l.a.createElement(U,{medium:!0}),l.a.createElement(d.Text,{style:E.headline5},"User"),l.a.createElement(d.Text,{style:E.subtitle2},"username: "+t),l.a.createElement(U,{medium:!0})))},q=function(e){return m.a.create({container:{paddingHorizontal:8,backgroundColor:e.colors.background,borderRadius:e.roundness}})},Z=function(e){var t=e.isDark,n=e.toggleTheme,r=Object(c.useState)(""),i=a()(r,2),o=i[0],u=i[1],m=k(M),p=Object(d.useTheme)(),h=F(o),b=h.voteValue,v=h.vote,O=h.room,S=Object(c.useCallback)((function(e){u(e),s.a.setItem("username",e)}),[u]);return Object(c.useEffect)((function(){s.a.getItem("username").then((function(e){e&&u(e)}))}),[]),l.a.createElement(d.Surface,{style:m.page},l.a.createElement(d.Surface,{style:m.canvas},l.a.createElement(g.a,{style:m.head},l.a.createElement(d.Text,{style:E.headline3},"Planning Poker \ud83c\udfb2"),l.a.createElement(g.a,{style:m.switchWrapper},l.a.createElement(f.a,{value:t,onChange:n}))),l.a.createElement(g.a,{style:m.divider}),l.a.createElement(y,{mode:"space-evenly"},l.a.createElement(g.a,{style:m.flexRow},l.a.createElement(N,{roomId:O.id})),l.a.createElement(U,{medium:!0}),l.a.createElement(g.a,{style:m.flexRow},l.a.createElement(H,{username:o}))),l.a.createElement(g.a,{style:m.fillWidth},l.a.createElement(U,null),l.a.createElement(d.TextInput,{style:{backgroundColor:p.colors.background},value:o,label:"Username",onChangeText:S}),l.a.createElement(U,null)),l.a.createElement(g.a,null,l.a.createElement(U,null),l.a.createElement(I,{onValuePress:v,isDark:t,selectedValue:b}),l.a.createElement(U,null)),l.a.createElement(j,{users:Object.values(O.users)})))},M=function(e){return m.a.create({canvas:{alignItems:"center",height:"100%",paddingHorizontal:16,paddingVertical:16,width:Object(p.a)("90%")},divider:{alignSelf:"stretch",borderBottomColor:e.dark?e.colors.accent:e.colors.primary,borderBottomWidth:2},fillWidth:{alignSelf:"stretch"},flexRow:{flex:1},head:{flexDirection:"row",justifyContent:"space-between",width:"100%"},page:{alignItems:"center",backgroundColor:e.colors.primary,flex:1,paddingBottom:32},switchWrapper:{flexDirection:"column",justifyContent:"center",marginHorizontal:16}})};function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q={light:K(K({},d.DefaultTheme),{},{colors:K(K({},d.DefaultTheme.colors),{},{primary:"#00838f",accent:"#FfCDD2"})}),dark:K(K({},d.DarkTheme),{},{colors:K(K({},d.DarkTheme.colors),{},{primary:"#005662",accent:"#cb9ca1"})})};t.a=function(){var e=O(),t=Object(c.useState)(e),r=a()(t,2),f=r[0],m=r[1],g=Object(i.a)({Poppins:n(458)}),p=a()(g,1)[0],h=Object(c.useCallback)((function(){m(!f),s.a.setItem("isDark",JSON.stringify(!f))}),[f,m]);return Object(c.useEffect)((function(){s.a.getItem("isDark").then((function(e){e&&m(JSON.parse(e))}))}),[]),p?l.a.createElement(u.AppearanceProvider,null,l.a.createElement(d.Provider,{theme:f?Q.dark:Q.light},l.a.createElement(Z,{isDark:f,toggleTheme:h}))):l.a.createElement(o.a,null)}},253:function(e,t,n){n(254),e.exports=n(460)},254:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/PlanningPokerApp/expo-service-worker.js",{scope:"/PlanningPokerApp/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))},458:function(e,t,n){e.exports=n.p+"./fonts/Poppins-Regular.ttf"}},[[253,1,2]]]);
//# sourceMappingURL=app.bf12b3c5.chunk.js.map